<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 450">
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="20" font-weight="bold">Block Synchronization: @synchronize Barrier</text>
  
  <!-- Time arrow -->
  <line x1="50" y1="70" x2="50" y2="420" stroke="#666" stroke-width="2"/>
  <polygon points="50,420 45,410 55,410" fill="#666"/>
  <text x="30" y="245" fill="#888" font-family="Arial, sans-serif" font-size="12" transform="rotate(-90, 30, 245)">Time →</text>
  
  <!-- Warp columns -->
  <text x="150" y="70" text-anchor="middle" fill="#e94560" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Warp 1</text>
  <text x="300" y="70" text-anchor="middle" fill="#3498db" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Warp 2</text>
  <text x="450" y="70" text-anchor="middle" fill="#2ecc71" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Warp 3</text>
  <text x="600" y="70" text-anchor="middle" fill="#f39c12" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Warp 4</text>
  
  <!-- Timeline lines -->
  <line x1="150" y1="85" x2="150" y2="400" stroke="#444" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="300" y1="85" x2="300" y2="400" stroke="#444" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="450" y1="85" x2="450" y2="400" stroke="#444" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="600" y1="85" x2="600" y2="400" stroke="#444" stroke-width="1" stroke-dasharray="3,3"/>
  
  <!-- Phase 1: Work (different lengths to show async) -->
  <!-- Warp 1 - short work -->
  <rect x="115" y="95" width="70" height="50" rx="5" fill="#e94560" stroke="#ff6b6b" stroke-width="2"/>
  <text x="150" y="125" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="11">Work</text>
  
  <!-- Warp 2 - long work -->
  <rect x="265" y="95" width="70" height="100" rx="5" fill="#3498db" stroke="#5dade2" stroke-width="2"/>
  <text x="300" y="150" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="11">Work</text>
  
  <!-- Warp 3 - medium work -->
  <rect x="415" y="95" width="70" height="70" rx="5" fill="#2ecc71" stroke="#58d68d" stroke-width="2"/>
  <text x="450" y="135" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="11">Work</text>
  
  <!-- Warp 4 - very long work -->
  <rect x="565" y="95" width="70" height="130" rx="5" fill="#f39c12" stroke="#f7dc6f" stroke-width="2"/>
  <text x="600" y="165" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="11">Work</text>
  
  <!-- Waiting periods (dotted) -->
  <rect x="115" y="150" width="70" height="75" rx="3" fill="none" stroke="#e94560" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="150" y="190" text-anchor="middle" fill="#e94560" font-family="Arial, sans-serif" font-size="9">waiting...</text>
  
  <rect x="265" y="200" width="70" height="25" rx="3" fill="none" stroke="#3498db" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="300" y="217" text-anchor="middle" fill="#3498db" font-family="Arial, sans-serif" font-size="9">wait</text>
  
  <rect x="415" y="170" width="70" height="55" rx="3" fill="none" stroke="#2ecc71" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="450" y="200" text-anchor="middle" fill="#2ecc71" font-family="Arial, sans-serif" font-size="9">waiting...</text>
  
  <!-- Warp 4 finishes last - no waiting -->
  
  <!-- BARRIER -->
  <rect x="80" y="230" width="670" height="40" rx="5" fill="#9b59b6" stroke="#bb79d6" stroke-width="3"/>
  <text x="400" y="255" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="14" font-weight="bold">@synchronize  —  BARRIER</text>
  
  <!-- Arrows converging to barrier -->
  <path d="M 150 225 L 150 230" stroke="#e94560" stroke-width="2"/>
  <path d="M 300 225 L 300 230" stroke="#3498db" stroke-width="2"/>
  <path d="M 450 225 L 450 230" stroke="#2ecc71" stroke-width="2"/>
  <path d="M 600 225 L 600 230" stroke="#f39c12" stroke-width="2"/>
  
  <!-- Arrows leaving barrier -->
  <path d="M 150 270 L 150 280" stroke="#e94560" stroke-width="2"/>
  <path d="M 300 270 L 300 280" stroke="#3498db" stroke-width="2"/>
  <path d="M 450 270 L 450 280" stroke="#2ecc71" stroke-width="2"/>
  <path d="M 600 270 L 600 280" stroke="#f39c12" stroke-width="2"/>
  
  <!-- Phase 2: Synchronized work (same length, aligned) -->
  <rect x="115" y="285" width="70" height="60" rx="5" fill="#e94560" stroke="#ff6b6b" stroke-width="2"/>
  <text x="150" y="320" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="11">Work</text>
  
  <rect x="265" y="285" width="70" height="60" rx="5" fill="#3498db" stroke="#5dade2" stroke-width="2"/>
  <text x="300" y="320" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="11">Work</text>
  
  <rect x="415" y="285" width="70" height="60" rx="5" fill="#2ecc71" stroke="#58d68d" stroke-width="2"/>
  <text x="450" y="320" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="11">Work</text>
  
  <rect x="565" y="285" width="70" height="60" rx="5" fill="#f39c12" stroke="#f7dc6f" stroke-width="2"/>
  <text x="600" y="320" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="11">Work</text>
  
  <!-- Annotations -->
  <rect x="680" y="95" width="100" height="55" rx="5" fill="#1a1a2e" stroke="#666" stroke-width="1"/>
  <text x="730" y="115" text-anchor="middle" fill="#ff6b6b" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Async!</text>
  <text x="730" y="132" text-anchor="middle" fill="#aaa" font-family="Arial, sans-serif" font-size="9">Warps finish</text>
  <text x="730" y="145" text-anchor="middle" fill="#aaa" font-family="Arial, sans-serif" font-size="9">at different times</text>
  
  <rect x="680" y="285" width="100" height="55" rx="5" fill="#1a2a1a" stroke="#2ecc71" stroke-width="1"/>
  <text x="730" y="305" text-anchor="middle" fill="#2ecc71" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Synchronized!</text>
  <text x="730" y="322" text-anchor="middle" fill="#aaa" font-family="Arial, sans-serif" font-size="9">All start together</text>
  <text x="730" y="335" text-anchor="middle" fill="#aaa" font-family="Arial, sans-serif" font-size="9">Shared mem safe</text>
  
  <!-- Bottom note -->
  <rect x="100" y="365" width="550" height="50" rx="8" fill="#2a1a2a" stroke="#9b59b6" stroke-width="2"/>
  <text x="375" y="385" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="11">After the barrier: all warps have completed their previous work.</text>
  <text x="375" y="403" text-anchor="middle" fill="#ddaadd" font-family="Arial, sans-serif" font-size="11">Shared memory is now consistent — safe to read what others wrote!</text>
</svg>
